# 简析动态规划

> 动态规划是一种通过把原问题分解为相对简单的子问题的方式求解复杂问题的方法。

动态规划是一种在OI中非常常见的算法。如上所述，动态规划的精髓在于**子问题**，然而并不是所有和子问题相关的算法都是动态规划。要搞清楚动态规划**是什么、为什么、怎么用**，我们可以从两种方向来认识。

## 从递推说起

*例题1：*

蒜头君很喜欢爬楼梯，这一次，他获得了一个特异功能，每次可以跳跃任意奇数的阶梯。比如他初始在楼底，跨越一个阶梯到达 11 号阶梯，或者跨越 33 个楼梯到达 33 号阶梯。如下图

![蒜头君爬楼梯](https://res.jisuanke.com/img/upload/20180403/3110ec4f381651d86db508f2d5968c721a65e126.png)

为了选出一种最轻松的爬楼梯的方式，蒜头君想把所有不同的到达楼顶的方式都尝试一遍。对于一共有 $n$ 个阶梯的楼梯，蒜头君一共有多少种方法从楼底到达楼顶？



如果你没有学过递推或者动态规划，看到这道题时你多半是一脸懵逼的：计算到达楼顶的方案数？这怎么算啊！我难道要从开始递归枚举所有可能的步长？明显分分钟TLE啊！

然而你离答案就差一点。

Tips: 你要知道第 $n$ 个阶梯的方案数，你只需要知道到第 $n-1, n-3, n-5,...$ 个阶梯的方案数。

我怎么知道？存下来就行了呗：
$$
path\left[ n\right] =path \left[ n-1\right] +path \left[ n-3\right]+...+path \left[ n-(2k-1)\right]
$$
这么一来，时间复杂度就变成 $O(n)$ 了，过！

我们回顾一下刚才的思路：把求解 $path\left[ n\right]$ 的问题分解成求解 $path \left[ n-1\right] ,path \left[ n-3\right],...,path \left[ n-(2k-1)\right]$ 的问题，用数组记录每个子问题的解以避免重复计算。

## 从记忆化搜索说起

例题2：

已知一对兔子，每个月可以生一对小兔子，小兔子出生后的第二个月会变为成年兔子，会继续生小兔子。

```
第一个月，我们有 1 对小兔子。
第二个月，我们有 1 对成年的兔子。
第三个月，我们有 1 对成年的兔子，有 1 对小兔子，共 2 对。
第四个月，我们有 2 对成年的兔子，有 1 对小兔子，共 3 对。
第五个月，我们有 3 对成年的兔子，有 2 对小兔子，共 5 对。
......
```

现在，我们希望知道第 $n$ 个月，一共有多少只兔子。（兔子身体素质好，不会死掉。）



$1,1,2,3,5,...$ 应该已经有同学看出这是个斐波那契数列了吧。原因很简单：在第 $n$ 天的时候我们有 $r[n-2]$ 只成年兔子，这些兔子会生出一样多的小兔子，再加上现有的 $r[n-1]$ 只，总共就是 $r[n] = r[n-1] + r[n-2]$ 只。

那么现在还有个要求：用搜索解这道题。我们可以直接糊一个DFS（深度优先搜索上去：

```c++
int fib(int x) {
    if (x <= 2) {
        return 1;
    } else {
        return fib(x - 1) + fib(x - 2);
    }
}
```

