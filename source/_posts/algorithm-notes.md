---
title: 算法学习笔记
date: 2021-10-10 15:08:00 +08:00
tags: 算法
mathjax: true
---

学习算法的过程中看题解是很重要的一环，但往往题解只提供一种解法，角度难免片面。因此这里主要以题目为中心，整理我看到的各种解法以及一些个人感想。

## P1115 最大子段和

这题贪心应该是最直接的方法，也同时可以用前缀和的思想做。

题目要求的是选连续的一段，而且不限制长度，如果我们又枚举起点又枚举长度就会 $O(n^2)$ .

起点不确定的情况不好控制，我们可以把子段和转化成：第 $1$ 到 $x$ 个数之和减去第 $1$ 到 $y$ 个数之和，其中 $x > y$ . 对于每一个 $x$ ，问题就转换成了求最小前缀和。时间复杂度 $O(n)$.

贪心就更直接了。设当前以第 $i$ 个数结尾的子段最大和为 $dp[i]$ ，我们可以看出若是 $dp[i - 1] + a[i] < 0$，我们就还不如不选第 $i$ 个数，直接 $dp[i] = 0$ 即可。其他情况下就必然是 $dp[i] = dp[i - 1] + a[i]$. 最后找出最大的 $dp[i]$ 就可以了。由于 $dp[i]$ 可以直接由一个变量存储，空间复杂度 $O(1)$. 时间复杂度 $O(n)$.

## CF1573B Swaps

这题看起来很复杂，其实就一个关键点：$a$ 都为奇数而 $b$ 都为偶数，因此这两个数组从第一个数开始就不一样。想让 $a$ 字典序小于 $b$ 的话，就需要且仅需要 $a_1<b_1$. 所以只要找到一对 $a_i$ 和 $b_j$ 满足 $a_i<b_j$ 并一个一个把这两个数分别移到最前面就好了。此时问题就转化为找最小的 $i+j-2$. （若下标从 $0$ 开始则为最小的 $i+j$）

假设我们一定要选某个 $b$ 中的偶数 $b_j$，此时我们只需要找满足 $a_i<b_j$ 的下标最小的 $a_i$ 即为最优解。因此我们可以这样做：开一个数组 $p$ 记录某个数 $n$ 在数组 $a/b$ 中的位置 $p_n$. 从大到小遍历所有的数，然后用一个变量 $l$ 记录当前遍历到的 $a$ 中最小的下标，若当前数 $n$ 为奇数则 $l=min(l, p_n)$，若当前为偶数则更新答案为 $min(answer, p_n + l)$. （注意这里认为下标从 $0$ 开始）

## ABC223B String Shifting

不知道是不是受到之前做的一道很类似的题的影响，这题想了很久很久。

首先分析问题：题目中的平移可等价为把字符串的前$n$个字符移到最后或者把字符串的后$n$个字符移到最前。那么我们首先会发现把前$n$个字符移动到最后等价于把后$length-n$个字符移动到最前，我们只用关心移动到最前（或最后）的情况。由于每次只能操作最后的$n$个字符，无论操作多少次都可等价于操作一次。那么问题转化为：

> 给定非空字符串$S$，选择$S$的后$n$个字符移动到首端。分别求移动后使得$S$字典序最大和最小的$n$。

剩下的就很简单了：鉴于$n\leq1000$，我们直接枚举所有可能的$n$，把最大的和最小的找出来就好了。（然而因为没注意到这个题允许$O(n^2)$时间复杂度我卡了1hr多）

## 2019年广东工业大学新生赛 F 失踪的玫瑰

参考：[【题解】2019年广东工业大学腾讯杯新生程序设计竞赛](https://www.nowcoder.com/discuss/352755)

题面可以等价转换为：有$n$个山洞，初始状态下每个山洞里都有一只狐狸，每天晚上每只没抓住的狐狸都会分身去两边的洞，每天白天都有一个猎人去查看一个山洞，求抓住全部狐狸的方案数。以下用x代表一定没有狐狸的洞口，用o代表有狐狸的洞口。对于$n=5$的情况，我们从右往左依次检查试试：

| 检查洞口 | 白天抓捕完后 | 过了一晚上后 |
| -------- | ------------ | ------------ |
| 5        | oooo**x**    | ooooo        |
| 4        | ooo**x**o    | oooox        |
| 3        | oo**x**ox    | oooxo        |
| 2        | o**x**oxo    | xoxox        |

可以看出最后一次抓捕的下一个白天，所有奇数洞都没有狐狸。

下面有一个重要的结论：

每天检查之后，被检查的洞的右边**不会存在开局位于奇数洞**的狐狸。

为什么呢？

因为开局在奇数洞的狐狸，在奇数次抓捕时必定在奇数洞里，在偶数次抓捕时必定在偶数洞里。开局在偶数洞的狐狸正好相反。而从奇数洞走到旁边的奇数洞需要2个晚上，被检查的洞的左边的狐狸若是想走到右边，必定会在移动时遇到抓捕。

这里还应注意到的是，我们第一天检查5号洞口后，4号洞口的狐狸当晚就会分身去5号洞口，也就是说检查两边的洞口是**无效的**。因此3天即可抓捕完奇数洞狐狸。

如果要抓开局位于偶数洞的狐狸呢？

| 检查洞口 | 白天抓捕完后 | 过了一晚上后 |
| -------- | ------------ | ------------ |
| 4        | ooo**x**o    | oooox        |
| 3        | oo**x**ox    | oooxo        |
| 2        | o**x**oxo    | xoxox        |

3天即可抓捕完。

然后呢，抓奇数洞狐狸？诶奇数洞怎么已经没有狐狸了？这是因为我们花了奇数天抓捕，开局偶数洞的狐狸一晚上后都在奇数洞。那么我们能不能把这个当作开局状态，再来一次偶数洞狐狸抓捕？

当然可以！最后答案是$\{4,3,2,4,3,2\}$，但是这不是字典序最小的方案。因为选择从左到右给洞穴标号还是从右到左给洞穴标号是不重要的，所以答案为$\{2,3,4,2,3,4\}$.

再经过一些推导，洞穴个数$n$为奇数时都为这种情况，即$\{2,3,4,\cdots ,n-1,2,3,4,\cdots ,n-1\}$.

$n$为偶数时，比如$n=4$时，因为$n-1=3$为奇数，我们就先抓开局奇数洞狐狸：

| 检查洞口 | 白天抓捕完后   | 过了一晚上后 |
| -------- | -------------- | ------------ |
| 3        | oo**x**o       | ooox         |
| 2        | o**x**ox       | xoxo         |
| 3        | xo**x**o（？） | oxox         |
| 2        | o**x**ox（？） | xoxo         |

诶诶诶等一下！这最后两次都抓了个空气啊！

这是因为$n$为偶数时抓奇数洞狐狸所需天数不是奇数天而是偶数天了。开局偶数洞的狐狸一晚上后都在偶数洞。我们要抓偶数洞狐狸，但是不能检查两边的洞口（也就是第1个洞口不能是$n$），所以我们调换方向，从2号洞口开始。

| 检查洞口 | 白天抓捕完后 | 过了一晚上后 |
| -------- | ------------ | ------------ |
| 2        | o**x**oo     | xooo         |
| 3        | xo**x**o     | oxox         |

成功！最后结果是$\{3,2,2,3\}$，调换一下编号方向就是$\{2,3,3,2\}$. 所以$n$为偶数时答案为$\{2,3,\cdots n-1,n-1,n-2,\cdots ,1\}$.
